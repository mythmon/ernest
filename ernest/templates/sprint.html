{% extends "base.html" %}
{% block content %}
<div id="content">
  <h1>Sprint: {{ sprint }}</h1>
  <p>
    Most recent updated bug: {{ latest_change_time }}
  </p>
  <table class="table-striped table-condensed">
    <tr>
      <th>ID</th>
      <th>summary</th>
      <th>last updated</th>
      <th>depends on</th>
      <th>status</th>
      <th>points</th>
    </tr>
    {% for bug in bugs %}
      <tr class="bug-row bug-row-{{ bug.status.lower() }}">
        <td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id={{ bug.id }}">{{ bug.id }}</a></td>
        <td>
          {% if bug.securitygroup %}
            <span class="label label-important">SECURE</span>
          {% endif %}
          {% if bug.confidentialgroup %}
            <span class="label label-important">CONFIDENTIAL</span>
          {% endif %}
          {% if bug.needinfo %}
            <span class="label label-important" title="{{ bug.needinfo }}">NEEDINFO</span>
          {% endif %}
          {{ bug.summary }}
          {% for flag in bug.whiteboardflags %}
            <span class="label">{{ flag }}
          {% endfor %}
        </td>
        <td>{{ bug.last_change_time }}</td>
        <td>
          {% for blocker in bug.depends_on %}
            <a href="http://bugzilla.mozilla.org/show_bug.cgi?id={{ blocker }}">{{ blocker }}</a>
          {% endfor %}
        </td>
        <td>{{ bug.status }}</td>
        <td>{{ bug.points }}</td>
      </tr>
    {% endfor %}
  </table>
</div>
{% endblock content %}
{% block js %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/ernest-bugs.js') }}"></script>
{% endblock js %}
